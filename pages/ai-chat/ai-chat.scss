/**
 * AI对话页面样式
 * @author SteadyGame Team
 */

@import '../../styles/variables.scss';

.chat-page {
	height: 100vh;
	display: flex;
	flex-direction: column;
	background-color: $bg-base;
}

.chat-messages {
	flex: 1;
	padding: $spacing-base;
}

.chat-messages-inner {
	display: flex;
	flex-direction: column;
}

.chat-message {
	display: flex;
	margin-bottom: $spacing-base;
	
	&--user {
		flex-direction: row-reverse;
		
		.chat-bubble {
			background-color: $primary-color;
			
			.chat-bubble-text {
				color: $text-inverse;
			}
		}
		
		.chat-avatar {
			margin-left: $spacing-sm;
			margin-right: 0;
		}
	}
	
	&--ai {
		.chat-bubble {
			background-color: $bg-white;
		}
		
		.chat-avatar {
			margin-right: $spacing-sm;
		}
	}
}

.chat-avatar {
	width: 72rpx;
	height: 72rpx;
	border-radius: 50%;
	background-color: $bg-white;
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: center;
	flex-shrink: 0;
}

.chat-avatar-icon {
	font-size: 40rpx;
}

.chat-bubble {
	max-width: 70%;
	padding: $spacing-sm $spacing-base;
	border-radius: $radius-lg;
	box-shadow: $shadow-light;
	
	&--typing {
		padding: $spacing-base;
	}
}

.chat-bubble-text {
	font-size: $font-base;
	color: $text-primary;
	line-height: 1.6;
	white-space: pre-wrap;
	word-break: break-word;
}

.chat-typing {
	display: flex;
	flex-direction: row;
	align-items: center;
	gap: 8rpx;
}

.chat-typing-dot {
	width: 16rpx;
	height: 16rpx;
	background-color: $primary-color;
	border-radius: 50%;
	animation: chat-typing-bounce 1.4s infinite ease-in-out both;
	
	&:nth-child(1) {
		animation-delay: -0.32s;
	}
	
	&:nth-child(2) {
		animation-delay: -0.16s;
	}
}

@keyframes chat-typing-bounce {
	0%, 80%, 100% {
		transform: scale(0);
	}
	40% {
		transform: scale(1);
	}
}

.chat-input-bar {
	display: flex;
	flex-direction: row;
	align-items: center;
	padding: $spacing-sm $spacing-base;
	background-color: $bg-white;
	border-top: 1rpx solid $border-light;
	padding-bottom: calc($spacing-sm + env(safe-area-inset-bottom));
}

.chat-input {
	flex: 1;
	height: 80rpx;
	padding: 0 $spacing-base;
	background-color: $bg-gray;
	border-radius: $radius-round;
	font-size: $font-base;
}

.chat-voice-btn,
.chat-send-btn {
	width: 80rpx;
	height: 80rpx;
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: center;
	margin-left: $spacing-sm;
}

.chat-voice-icon,
.chat-send-icon {
	font-size: 48rpx;
}

.chat-send-btn {
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	border-radius: 50%;
	
	&--disabled {
		opacity: 0.5;
	}
}

.chat-send-icon {
	color: $text-inverse;
	font-size: 40rpx;
}
